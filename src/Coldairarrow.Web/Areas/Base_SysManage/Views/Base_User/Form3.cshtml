@using Coldairarrow.Entity.Base_SysManage;
@using Coldairarrow.Util;
@using Coldairarrow.Business.Base_SysManage;

@{
    Layout = null;
    var obj = (Base_User)Model;
    string roleIdList = "[]";
    if (!obj.Id.IsNullOrEmpty())
    {
        roleIdList = Base_UserBusiness.GetUserRoleIds(obj.UserId).ToJson().Replace("\"", "'");
    }
    string str = obj.ToJson();
    var objStr = Html.Raw(obj.ToJson());
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Form3</title>

    <link rel="stylesheet" href="~/skin/adminlte/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/Skin/AdminLTE/plugins/bootstrap-table/bootstrap-table.min.css">
    <link rel="stylesheet" href="~/Skin/AdminLTE/plugins/bootstrap-select/bootstrap-select.min.css">
    <link rel="stylesheet" href="~/css/admin.css" />

    <script src="~/Skin/AdminLTE/plugins/jQuery/jquery-2.2.3.min.js"></script>
    <script src="~/Skin/AdminLTE/bootstrap/js/bootstrap.min.js"></script>
    <script src="~/Skin/AdminLTE/plugins/bootstrap-table/bootstrap-table.min.js"></script>
    <script src="~/Skin/AdminLTE/plugins/bootstrap-table/bootstrap-table-zh-CN.min.js"></script>
    <script src="~/Skin/AdminLTE/plugins/bootstrap-select/bootstrap-select.min.js"></script>
    <script src="~/Skin/AdminLTE/plugins/bootstrap-select/defaults-zh_CN.min.js"></script>
    <script src="~/Scripts/util/util.js"></script>
    <script src="~/Skin/AdminLTE/plugins/layer/layer.js"></script>
    <script src="~/Skin/AdminLTE/plugins/bootstrap-validator/validator.min.js"></script>

    <!--bootstrap-datetimepicker-->
    <link href="~/Skin/AdminLTE/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" />
    <script src="~/Skin/AdminLTE/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
    <script src="~/Skin/AdminLTE/plugins/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>

    <style>
        html {
            height: 100%;
        }

        body {
            height: 100%;
            background-color: transparent;
        }

        .fx-from-container {
            width: 100%;
            height: 100%
        }

        .fx-form-center {
            padding: 15px;
            width: calc(100% - 1px);
            height: calc(100% - 45px);
            overflow: auto;
            position:relative;
        }

        .fx-from-bottom {
            width: 100%;
            height: 45px;
        }
    </style>
</head>
<body>
    <div class="fx-from-container">
        <div class="fx-form-center">
            <form id="form" class="form-horizontal" role="form">
                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">用户名</label>
                    <div class="col-sm-5">
                        <input name="UserName" value="@obj.UserName" type="text" class="form-control" required>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">密码</label>
                    <div class="col-sm-5">
                        <input name="Pwd" type="password" class="form-control">
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">姓名</label>
                    <div class="col-sm-5">
                        <input name="RealName" value="@obj.RealName" type="text" class="form-control" required>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">姓名</label>
                    <div class="col-sm-5">
                        <input name="RealName" value="@obj.RealName" type="text" class="form-control" required>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">姓名</label>
                    <div class="col-sm-5">
                        <input name="RealName" value="@obj.RealName" type="text" class="form-control" required>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">姓名</label>
                    <div class="col-sm-5">
                        <input name="RealName" value="@obj.RealName" type="text" class="form-control" required>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">姓名</label>
                    <div class="col-sm-5">
                        <input name="RealName" value="@obj.RealName" type="text" class="form-control" required>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">姓名</label>
                    <div class="col-sm-5">
                        <input name="RealName" value="@obj.RealName" type="text" class="form-control" required>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="col-sm-2 control-label">性别</label>
                    <div class="col-sm-5">
                        <select id="Sex" class="selectpicker form-control" name="@obj.Sex" required data-style="btn-default btn-sm">
                            <option value="1">男</option>
                            <option value="0">女</option>
                        </select>
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group form-group-sm" id="container" style="position:relative">
                    <label class="col-sm-2 control-label">出生日期</label>
                    <div class="col-sm-5" style="position:relative">
                        <input type="text" value="@(obj.Birthday?.ToString("yyyy-MM-dd"))" id="datetimepicker" data-date-format="yyyy-mm-dd" class="form-control">
                    </div>
                </div>
                @*<div class="form-group form-group-sm">
            <label class="col-sm-2 control-label">出生日期</label>
            <div class="col-sm-5">
                <div class="input-append date" id="datetimepicker" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
                    <input size="16" type="text" value="12-02-2012" readonly>
                    <span class="add-on"><i class="icon-th"></i></span>
                </div>
            </div>
        </div>*@

                @*<div class="form-group">
            <label for="dtp_input2" class="col-md-2 control-label">Date Picking</label>
            <div class="input-group date form_date col-md-5" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd">
                <input class="form-control" size="16" type="text" value="">
            </div>
            <input type="hidden" id="dtp_input2" value="" /><br />
        </div>*@
                <div class="form-group">
                    <button id="submit" type="submit" class="hidden" hidden>提交</button>
                </div>
            </form>
        </div>
        <div class="fx-from-bottom">
            <div class="layui-layer-btn layui-layer-btn-">
                <a onclick="submitForm();" class="layui-layer-btn0">确定</a>
                <a class="layui-layer-btn1">取消</a>
            </div>
        </div>
    </div>

    <script>
        var theEntity = @objStr;

        $(function () {
            initEvent();
        });

        //事件绑定
        function initEvent() {
            $('#Sex').selectpicker('val', theEntity.Sex);
            $('#datetimepicker').datetimepicker({
                language: 'zh-CN',
                minView: 2,//日期选择
                widgetParent: $('#container'),
                //widgetPositioning: {
                //    horizontal: "auto",
                //    vertical: "auto"
                //}
                sideBySide: true,
                widgetPositioning: {
                    horizontal: 'right',
                    vertical: 'top'
                }
            });
            //表单校验
            $('#form').validator().on('submit', function (e) {
                //校验成功
                if (!e.isDefaultPrevented()) {
                    e.preventDefault();

                    var values = $('#form').getValues();
                    $.extend(theEntity, values);
                    $.postJSON('', theEntity, function (resJson) {

                    });
                }
            })
        }

        //提交表单
        function submitForm() {
            $('#submit').trigger('click');
        }
    </script>
</body>
</html>
